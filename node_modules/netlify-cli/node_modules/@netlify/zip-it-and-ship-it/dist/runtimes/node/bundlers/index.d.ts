import type { Message } from '@netlify/esbuild';
import { FunctionConfig } from '../../../config.js';
import { FeatureFlag, FeatureFlags } from '../../../feature_flags.js';
import { FunctionSource } from '../../../function.js';
import { ModuleFormat } from '../utils/module_format.js';
export declare type NodeBundlerName = 'esbuild' | 'esbuild_zisi' | 'nft' | 'zisi';
declare type BundlerWarning = Message;
declare type CleanupFunction = () => Promise<void>;
export declare type NativeNodeModules = Record<string, Record<string, string | undefined>>;
export declare type BundleFunction = (args: {
    basePath?: string;
    config: FunctionConfig;
    featureFlags: Record<FeatureFlag, boolean>;
    pluginsModulesPath?: string;
    repositoryRoot?: string;
} & FunctionSource) => Promise<{
    aliases?: Map<string, string>;
    rewrites?: Map<string, string>;
    basePath: string;
    bundlerWarnings?: BundlerWarning[];
    cleanupFunction?: CleanupFunction;
    inputs: string[];
    mainFile: string;
    moduleFormat: ModuleFormat;
    nativeNodeModules?: NativeNodeModules;
    nodeModulesWithDynamicImports?: string[];
    srcFiles: string[];
}>;
export declare type GetSrcFilesFunction = (args: {
    basePath?: string;
    config: FunctionConfig;
    featureFlags: FeatureFlags;
    pluginsModulesPath?: string;
    repositoryRoot?: string;
} & FunctionSource) => Promise<string[]>;
interface NodeBundler {
    bundle: BundleFunction;
    getSrcFiles: GetSrcFilesFunction;
}
export declare const getBundler: (name: NodeBundlerName) => NodeBundler;
export declare const getDefaultBundler: ({ extension, mainFile, featureFlags, }: {
    extension: string;
    mainFile: string;
    featureFlags: FeatureFlags;
}) => Promise<NodeBundlerName>;
export {};
