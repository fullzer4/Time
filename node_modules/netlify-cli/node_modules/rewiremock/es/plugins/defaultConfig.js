import { resolve } from 'path';
import { ensureRequire, fileExists } from "./common/utils";

var rewireMockConfig = function rewireMockConfig(rewiremock) {
  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : process.cwd();

  var resolvedConfigPath = resolve(path, 'rewiremock.config.js');
  var fileName = fileExists(resolvedConfigPath);
  if (fileName) {
    var config = ensureRequire(fileName);
    (config.default || config)(rewiremock);
  }
};

export default rewireMockConfig;