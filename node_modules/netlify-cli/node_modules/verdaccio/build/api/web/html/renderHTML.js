"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = renderHTML;
exports.resolveLogo = resolveLogo;
exports.validatePrimaryColor = validatePrimaryColor;

var _debug = _interopRequireDefault(require("debug"));

var _lruCache = _interopRequireDefault(require("lru-cache"));

var _path = _interopRequireDefault(require("path"));

var _url = require("url");

var _commonsApi = require("@verdaccio/commons-api");

var _constants = require("../../../lib/constants");

var _utils = require("../../../lib/utils");

var _template = _interopRequireDefault(require("./template"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const pkgJSON = require('../../../../package.json');

const DEFAULT_LANGUAGE = 'es-US';
const cache = new _lruCache.default({
  max: 500,
  ttl: 1000 * 60 * 60
});
const debug = (0, _debug.default)('verdaccio');
const defaultManifestFiles = {
  js: ['runtime.js', 'vendors.js', 'main.js'],
  ico: 'favicon.ico'
};

function validatePrimaryColor(primaryColor) {
  const isHex = /^#+([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/i.test(primaryColor);

  if (!isHex) {
    debug('invalid primary color %o', primaryColor);
    return;
  }

  return primaryColor;
}

function resolveLogo(config, req) {
  var _config$web, _config$web2, _config$web4;

  const isLocalFile = (config === null || config === void 0 ? void 0 : (_config$web = config.web) === null || _config$web === void 0 ? void 0 : _config$web.logo) && !(0, _utils.isHTTPProtocol)(config === null || config === void 0 ? void 0 : (_config$web2 = config.web) === null || _config$web2 === void 0 ? void 0 : _config$web2.logo);

  if (isLocalFile) {
    var _config$web3;

    return `${(0, _utils.getPublicUrl)(config === null || config === void 0 ? void 0 : config.url_prefix, req)}-/static/${_path.default.basename(config === null || config === void 0 ? void 0 : (_config$web3 = config.web) === null || _config$web3 === void 0 ? void 0 : _config$web3.logo)}`;
  } else if ((0, _utils.isHTTPProtocol)(config === null || config === void 0 ? void 0 : (_config$web4 = config.web) === null || _config$web4 === void 0 ? void 0 : _config$web4.logo)) {
    var _config$web5;

    return config === null || config === void 0 ? void 0 : (_config$web5 = config.web) === null || _config$web5 === void 0 ? void 0 : _config$web5.logo;
  } else {
    return '';
  }
}

function renderHTML(config, manifest, manifestFiles, req, res) {
  var _config$i18n$web, _config$i18n, _config$web6, _config$web$darkMode, _config$web7, _config$web$title, _config$web8, _config$web$scope, _config$web9, _config$web$pkgManage, _config$web10, _validatePrimaryColor, _config$web11;

  const {
    url_prefix
  } = config;
  const base = (0, _utils.getPublicUrl)(config === null || config === void 0 ? void 0 : config.url_prefix, req);
  const basename = new _url.URL(base).pathname;
  const language = (_config$i18n$web = config === null || config === void 0 ? void 0 : (_config$i18n = config.i18n) === null || _config$i18n === void 0 ? void 0 : _config$i18n.web) !== null && _config$i18n$web !== void 0 ? _config$i18n$web : DEFAULT_LANGUAGE;
  const needHtmlCache = [undefined, null].includes(config === null || config === void 0 ? void 0 : (_config$web6 = config.web) === null || _config$web6 === void 0 ? void 0 : _config$web6.html_cache) ? true : config.web.html_cache;
  const darkMode = (_config$web$darkMode = config === null || config === void 0 ? void 0 : (_config$web7 = config.web) === null || _config$web7 === void 0 ? void 0 : _config$web7.darkMode) !== null && _config$web$darkMode !== void 0 ? _config$web$darkMode : false;
  const title = (_config$web$title = config === null || config === void 0 ? void 0 : (_config$web8 = config.web) === null || _config$web8 === void 0 ? void 0 : _config$web8.title) !== null && _config$web$title !== void 0 ? _config$web$title : _constants.WEB_TITLE;
  const scope = (_config$web$scope = config === null || config === void 0 ? void 0 : (_config$web9 = config.web) === null || _config$web9 === void 0 ? void 0 : _config$web9.scope) !== null && _config$web$scope !== void 0 ? _config$web$scope : '';
  const login = (0, _utils.hasLogin)(config);
  const logoURI = resolveLogo(config, req);
  const pkgManagers = (_config$web$pkgManage = config === null || config === void 0 ? void 0 : (_config$web10 = config.web) === null || _config$web10 === void 0 ? void 0 : _config$web10.pkgManagers) !== null && _config$web$pkgManage !== void 0 ? _config$web$pkgManage : ['yarn', 'pnpm', 'npm'];
  const version = pkgJSON.version;
  const primaryColor = (_validatePrimaryColor = validatePrimaryColor(config === null || config === void 0 ? void 0 : (_config$web11 = config.web) === null || _config$web11 === void 0 ? void 0 : _config$web11.primary_color)) !== null && _validatePrimaryColor !== void 0 ? _validatePrimaryColor : '#4b5e40';
  const {
    scriptsBodyAfter,
    metaScripts,
    scriptsbodyBefore,
    showInfo,
    showSettings,
    showThemeSwitch,
    showFooter,
    showSearch,
    showDownloadTarball
  } = Object.assign({}, {
    scriptsBodyAfter: [],
    bodyBefore: [],
    metaScripts: []
  }, config === null || config === void 0 ? void 0 : config.web);
  const options = {
    showInfo,
    showSettings,
    showThemeSwitch,
    showFooter,
    showSearch,
    showDownloadTarball,
    darkMode,
    url_prefix,
    basename,
    base,
    primaryColor,
    version,
    pkgManagers,
    login,
    logo: logoURI,
    title,
    scope,
    language
  };
  let webPage;

  try {
    webPage = cache.get('template');

    if (!webPage) {
      debug('web options %o', options);
      debug('web manifestFiles %o', manifestFiles);
      webPage = (0, _template.default)({
        manifest: manifestFiles !== null && manifestFiles !== void 0 ? manifestFiles : defaultManifestFiles,
        options,
        scriptsBodyAfter,
        metaScripts,
        scriptsbodyBefore
      }, manifest);
      debug('template :: %o', webPage);

      if (needHtmlCache) {
        cache.set('template', webPage);
        debug('set template cache');
      }
    } else {
      debug('reuse template cache');
    }
  } catch (error) {
    throw new Error(`theme could not be load, stack ${error.stack}`);
  }

  res.setHeader('Content-Type', _commonsApi.HEADERS.TEXT_HTML);
  res.send(webPage);
  debug('render web');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwa2dKU09OIiwicmVxdWlyZSIsIkRFRkFVTFRfTEFOR1VBR0UiLCJjYWNoZSIsIkxSVSIsIm1heCIsInR0bCIsImRlYnVnIiwiZGVmYXVsdE1hbmlmZXN0RmlsZXMiLCJqcyIsImljbyIsInZhbGlkYXRlUHJpbWFyeUNvbG9yIiwicHJpbWFyeUNvbG9yIiwiaXNIZXgiLCJ0ZXN0IiwicmVzb2x2ZUxvZ28iLCJjb25maWciLCJyZXEiLCJpc0xvY2FsRmlsZSIsIndlYiIsImxvZ28iLCJ1cmxfcHJlZml4IiwicGF0aCIsImJhc2VuYW1lIiwicmVuZGVySFRNTCIsIm1hbmlmZXN0IiwibWFuaWZlc3RGaWxlcyIsInJlcyIsImJhc2UiLCJVUkwiLCJwYXRobmFtZSIsImxhbmd1YWdlIiwiaTE4biIsIm5lZWRIdG1sQ2FjaGUiLCJ1bmRlZmluZWQiLCJpbmNsdWRlcyIsImh0bWxfY2FjaGUiLCJkYXJrTW9kZSIsInRpdGxlIiwiV0VCX1RJVExFIiwic2NvcGUiLCJsb2dpbiIsImxvZ29VUkkiLCJwa2dNYW5hZ2VycyIsInZlcnNpb24iLCJwcmltYXJ5X2NvbG9yIiwic2NyaXB0c0JvZHlBZnRlciIsIm1ldGFTY3JpcHRzIiwic2NyaXB0c2JvZHlCZWZvcmUiLCJzaG93SW5mbyIsInNob3dTZXR0aW5ncyIsInNob3dUaGVtZVN3aXRjaCIsInNob3dGb290ZXIiLCJzaG93U2VhcmNoIiwic2hvd0Rvd25sb2FkVGFyYmFsbCIsIk9iamVjdCIsImFzc2lnbiIsImJvZHlCZWZvcmUiLCJvcHRpb25zIiwid2ViUGFnZSIsImdldCIsInNldCIsImVycm9yIiwiRXJyb3IiLCJzdGFjayIsInNldEhlYWRlciIsIkhFQURFUlMiLCJURVhUX0hUTUwiLCJzZW5kIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaS93ZWIvaHRtbC9yZW5kZXJIVE1MLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBidWlsZERlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCBMUlUgZnJvbSAnbHJ1LWNhY2hlJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgVVJMIH0gZnJvbSAndXJsJztcblxuaW1wb3J0IHsgSEVBREVSUyB9IGZyb20gJ0B2ZXJkYWNjaW8vY29tbW9ucy1hcGknO1xuXG5pbXBvcnQgeyBXRUJfVElUTEUgfSBmcm9tICcuLi8uLi8uLi9saWIvY29uc3RhbnRzJztcbmltcG9ydCB7IGdldFB1YmxpY1VybCwgaGFzTG9naW4sIGlzSFRUUFByb3RvY29sIH0gZnJvbSAnLi4vLi4vLi4vbGliL3V0aWxzJztcbmltcG9ydCByZW5kZXJUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlJztcblxuY29uc3QgcGtnSlNPTiA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uL3BhY2thZ2UuanNvbicpO1xuY29uc3QgREVGQVVMVF9MQU5HVUFHRSA9ICdlcy1VUyc7XG5jb25zdCBjYWNoZSA9IG5ldyBMUlUoeyBtYXg6IDUwMCwgdHRsOiAxMDAwICogNjAgKiA2MCB9KTtcblxuY29uc3QgZGVidWcgPSBidWlsZERlYnVnKCd2ZXJkYWNjaW8nKTtcblxuY29uc3QgZGVmYXVsdE1hbmlmZXN0RmlsZXMgPSB7XG4gIGpzOiBbJ3J1bnRpbWUuanMnLCAndmVuZG9ycy5qcycsICdtYWluLmpzJ10sXG4gIGljbzogJ2Zhdmljb24uaWNvJyxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVByaW1hcnlDb2xvcihwcmltYXJ5Q29sb3IpIHtcbiAgY29uc3QgaXNIZXggPSAvXiMrKFthLWZBLUYwLTldezZ9fFthLWZBLUYwLTldezN9KSQvaS50ZXN0KHByaW1hcnlDb2xvcik7XG4gIGlmICghaXNIZXgpIHtcbiAgICBkZWJ1ZygnaW52YWxpZCBwcmltYXJ5IGNvbG9yICVvJywgcHJpbWFyeUNvbG9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gcHJpbWFyeUNvbG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUxvZ28oY29uZmlnLCByZXEpIHtcbiAgY29uc3QgaXNMb2NhbEZpbGUgPSBjb25maWc/LndlYj8ubG9nbyAmJiAhaXNIVFRQUHJvdG9jb2woY29uZmlnPy53ZWI/LmxvZ28pO1xuXG4gIGlmIChpc0xvY2FsRmlsZSkge1xuICAgIHJldHVybiBgJHtnZXRQdWJsaWNVcmwoY29uZmlnPy51cmxfcHJlZml4LCByZXEpfS0vc3RhdGljLyR7cGF0aC5iYXNlbmFtZShjb25maWc/LndlYj8ubG9nbyl9YDtcbiAgfSBlbHNlIGlmIChpc0hUVFBQcm90b2NvbChjb25maWc/LndlYj8ubG9nbykpIHtcbiAgICByZXR1cm4gY29uZmlnPy53ZWI/LmxvZ287XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbmRlckhUTUwoY29uZmlnLCBtYW5pZmVzdCwgbWFuaWZlc3RGaWxlcywgcmVxLCByZXMpIHtcbiAgY29uc3QgeyB1cmxfcHJlZml4IH0gPSBjb25maWc7XG4gIGNvbnN0IGJhc2UgPSBnZXRQdWJsaWNVcmwoY29uZmlnPy51cmxfcHJlZml4LCByZXEpO1xuICBjb25zdCBiYXNlbmFtZSA9IG5ldyBVUkwoYmFzZSkucGF0aG5hbWU7XG4gIGNvbnN0IGxhbmd1YWdlID0gY29uZmlnPy5pMThuPy53ZWIgPz8gREVGQVVMVF9MQU5HVUFHRTtcbiAgY29uc3QgbmVlZEh0bWxDYWNoZSA9IFt1bmRlZmluZWQsIG51bGxdLmluY2x1ZGVzKGNvbmZpZz8ud2ViPy5odG1sX2NhY2hlKSA/IHRydWUgOiBjb25maWcud2ViLmh0bWxfY2FjaGU7XG4gIGNvbnN0IGRhcmtNb2RlID0gY29uZmlnPy53ZWI/LmRhcmtNb2RlID8/IGZhbHNlO1xuICBjb25zdCB0aXRsZSA9IGNvbmZpZz8ud2ViPy50aXRsZSA/PyBXRUJfVElUTEU7XG4gIGNvbnN0IHNjb3BlID0gY29uZmlnPy53ZWI/LnNjb3BlID8/ICcnO1xuICBjb25zdCBsb2dpbiA9IGhhc0xvZ2luKGNvbmZpZyk7XG4gIGNvbnN0IGxvZ29VUkkgPSByZXNvbHZlTG9nbyhjb25maWcsIHJlcSk7XG4gIGNvbnN0IHBrZ01hbmFnZXJzID0gY29uZmlnPy53ZWI/LnBrZ01hbmFnZXJzID8/IFsneWFybicsICdwbnBtJywgJ25wbSddO1xuICBjb25zdCB2ZXJzaW9uID0gcGtnSlNPTi52ZXJzaW9uO1xuICBjb25zdCBwcmltYXJ5Q29sb3IgPSB2YWxpZGF0ZVByaW1hcnlDb2xvcihjb25maWc/LndlYj8ucHJpbWFyeV9jb2xvcikgPz8gJyM0YjVlNDAnO1xuICBjb25zdCB7IHNjcmlwdHNCb2R5QWZ0ZXIsIG1ldGFTY3JpcHRzLCBzY3JpcHRzYm9keUJlZm9yZSwgc2hvd0luZm8sIHNob3dTZXR0aW5ncywgc2hvd1RoZW1lU3dpdGNoLCBzaG93Rm9vdGVyLCBzaG93U2VhcmNoLCBzaG93RG93bmxvYWRUYXJiYWxsIH0gPSBPYmplY3QuYXNzaWduKFxuICAgIHt9LFxuICAgIHtcbiAgICAgIHNjcmlwdHNCb2R5QWZ0ZXI6IFtdLFxuICAgICAgYm9keUJlZm9yZTogW10sXG4gICAgICBtZXRhU2NyaXB0czogW10sXG4gICAgfSxcbiAgICBjb25maWc/LndlYlxuICApO1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIHNob3dJbmZvLFxuICAgIHNob3dTZXR0aW5ncyxcbiAgICBzaG93VGhlbWVTd2l0Y2gsXG4gICAgc2hvd0Zvb3RlcixcbiAgICBzaG93U2VhcmNoLFxuICAgIHNob3dEb3dubG9hZFRhcmJhbGwsXG4gICAgZGFya01vZGUsXG4gICAgdXJsX3ByZWZpeCxcbiAgICBiYXNlbmFtZSxcbiAgICBiYXNlLFxuICAgIHByaW1hcnlDb2xvcixcbiAgICB2ZXJzaW9uLFxuICAgIHBrZ01hbmFnZXJzLFxuICAgIGxvZ2luLFxuICAgIGxvZ286IGxvZ29VUkksXG4gICAgdGl0bGUsXG4gICAgc2NvcGUsXG4gICAgbGFuZ3VhZ2UsXG4gIH07XG5cbiAgbGV0IHdlYlBhZ2U7XG5cbiAgdHJ5IHtcbiAgICB3ZWJQYWdlID0gY2FjaGUuZ2V0KCd0ZW1wbGF0ZScpO1xuICAgIGlmICghd2ViUGFnZSkge1xuICAgICAgZGVidWcoJ3dlYiBvcHRpb25zICVvJywgb3B0aW9ucyk7XG4gICAgICBkZWJ1Zygnd2ViIG1hbmlmZXN0RmlsZXMgJW8nLCBtYW5pZmVzdEZpbGVzKTtcbiAgICAgIHdlYlBhZ2UgPSByZW5kZXJUZW1wbGF0ZShcbiAgICAgICAge1xuICAgICAgICAgIG1hbmlmZXN0OiBtYW5pZmVzdEZpbGVzID8/IGRlZmF1bHRNYW5pZmVzdEZpbGVzLFxuICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgc2NyaXB0c0JvZHlBZnRlcixcbiAgICAgICAgICBtZXRhU2NyaXB0cyxcbiAgICAgICAgICBzY3JpcHRzYm9keUJlZm9yZSxcbiAgICAgICAgfSxcbiAgICAgICAgbWFuaWZlc3RcbiAgICAgICk7XG4gICAgICBkZWJ1ZygndGVtcGxhdGUgOjogJW8nLCB3ZWJQYWdlKTtcbiAgICAgIGlmIChuZWVkSHRtbENhY2hlKSB7XG4gICAgICAgIGNhY2hlLnNldCgndGVtcGxhdGUnLCB3ZWJQYWdlKTtcbiAgICAgICAgZGVidWcoJ3NldCB0ZW1wbGF0ZSBjYWNoZScpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1ZygncmV1c2UgdGVtcGxhdGUgY2FjaGUnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGB0aGVtZSBjb3VsZCBub3QgYmUgbG9hZCwgc3RhY2sgJHtlcnJvci5zdGFja31gKTtcbiAgfVxuICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCBIRUFERVJTLlRFWFRfSFRNTCk7XG4gIHJlcy5zZW5kKHdlYlBhZ2UpO1xuICBkZWJ1ZygncmVuZGVyIHdlYicpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLDBCQUFELENBQXZC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