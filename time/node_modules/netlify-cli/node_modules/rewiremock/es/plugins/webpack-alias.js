import { readAliases, processFile } from './common/aliases';
import createPlugin from './_common';

var settings = null;

var configure = function configure(fileName) {
    settings = readAliases(fileName);
};

var fileNameTransformer = function fileNameTransformer(fileName) {
    if (!settings) {
        configure();
    }
    return processFile(fileName, settings);
};

export { configure };

export default createPlugin({
    fileNameTransformer: fileNameTransformer,

    name: 'webpack-alias'
});