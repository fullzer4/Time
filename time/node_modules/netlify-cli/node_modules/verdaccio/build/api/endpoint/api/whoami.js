"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

function _default(route) {
  route.get('/whoami', (req, res, next) => {
    if (req.get('referer') === 'whoami') {
      next({
        username: req.remote_user.name
      });
    } else {
      next('route');
    }
  });
  route.get('/-/whoami', (req, res, next) => {
    next({
      username: req.remote_user.name
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZSIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJ1c2VybmFtZSIsInJlbW90ZV91c2VyIiwibmFtZSJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcGkvZW5kcG9pbnQvYXBpL3dob2FtaS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXNwb25zZSwgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5cbmltcG9ydCB7ICROZXh0RnVuY3Rpb25WZXIsICRSZXF1ZXN0RXh0ZW5kIH0gZnJvbSAnLi4vLi4vLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocm91dGU6IFJvdXRlcik6IHZvaWQge1xuICByb3V0ZS5nZXQoJy93aG9hbWknLCAocmVxOiAkUmVxdWVzdEV4dGVuZCwgcmVzOiBSZXNwb25zZSwgbmV4dDogJE5leHRGdW5jdGlvblZlcik6IHZvaWQgPT4ge1xuICAgIGlmIChyZXEuZ2V0KCdyZWZlcmVyJykgPT09ICd3aG9hbWknKSB7XG4gICAgICBuZXh0KHsgdXNlcm5hbWU6IHJlcS5yZW1vdGVfdXNlci5uYW1lIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0KCdyb3V0ZScpO1xuICAgIH1cbiAgfSk7XG5cbiAgcm91dGUuZ2V0KCcvLS93aG9hbWknLCAocmVxOiAkUmVxdWVzdEV4dGVuZCwgcmVzOiBSZXNwb25zZSwgbmV4dDogJE5leHRGdW5jdGlvblZlcik6IGFueSA9PiB7XG4gICAgbmV4dCh7IHVzZXJuYW1lOiByZXEucmVtb3RlX3VzZXIubmFtZSB9KTtcbiAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFJZSxrQkFBVUEsS0FBVixFQUErQjtFQUM1Q0EsS0FBSyxDQUFDQyxHQUFOLENBQVUsU0FBVixFQUFxQixDQUFDQyxHQUFELEVBQXNCQyxHQUF0QixFQUFxQ0MsSUFBckMsS0FBc0U7SUFDekYsSUFBSUYsR0FBRyxDQUFDRCxHQUFKLENBQVEsU0FBUixNQUF1QixRQUEzQixFQUFxQztNQUNuQ0csSUFBSSxDQUFDO1FBQUVDLFFBQVEsRUFBRUgsR0FBRyxDQUFDSSxXQUFKLENBQWdCQztNQUE1QixDQUFELENBQUo7SUFDRCxDQUZELE1BRU87TUFDTEgsSUFBSSxDQUFDLE9BQUQsQ0FBSjtJQUNEO0VBQ0YsQ0FORDtFQVFBSixLQUFLLENBQUNDLEdBQU4sQ0FBVSxXQUFWLEVBQXVCLENBQUNDLEdBQUQsRUFBc0JDLEdBQXRCLEVBQXFDQyxJQUFyQyxLQUFxRTtJQUMxRkEsSUFBSSxDQUFDO01BQUVDLFFBQVEsRUFBRUgsR0FBRyxDQUFDSSxXQUFKLENBQWdCQztJQUE1QixDQUFELENBQUo7RUFDRCxDQUZEO0FBR0QifQ==